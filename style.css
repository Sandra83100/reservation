/* ============================================================
   RESET & BASE
   ============================================================ */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  --bleu:        #4A6FA5;
  --bleu-clair:  #E8EFF8;
  --vert:        #2E7D32;
  --vert-clair:  #E8F5E9;
  --rouge:       #C62828;
  --gris:        #9E9E9E;
  --gris-clair:  #F5F5F5;
  --gris-bord:   #E0E0E0;
  --texte:       #212121;
  --texte-doux:  #616161;
  --blanc:       #FFFFFF;
  --ombre:       0 2px 8px rgba(0,0,0,0.10);
  --rayon:       10px;
  --transition:  0.18s ease;
}

html { font-size: 16px; }

body {
  font-family: 'Segoe UI', Arial, sans-serif;
  background: var(--gris-clair);
  color: var(--texte);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* ============================================================
   HEADER
   ============================================================ */
header {
  background: var(--bleu);
  color: var(--blanc);
  text-align: center;
  padding: 2rem 1rem 1.5rem;
}

header h1 {
  font-size: 1.9rem;
  font-weight: 700;
  letter-spacing: 0.5px;
}

.subtitle {
  margin-top: .4rem;
  font-size: 1rem;
  opacity: 0.85;
}

/* ============================================================
   MAIN LAYOUT
   ============================================================ */
main {
  flex: 1;
  width: 100%;
  max-width: 720px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* ============================================================
   CALENDRIER
   ============================================================ */
.calendrier-section {
  background: var(--blanc);
  border-radius: var(--rayon);
  box-shadow: var(--ombre);
  padding: 1.5rem;
}

/* Navigation mois */
.calendrier-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.2rem;
}

.calendrier-nav h2 {
  font-size: 1.2rem;
  font-weight: 600;
  text-transform: capitalize;
  color: var(--bleu);
}

.calendrier-nav button {
  background: var(--bleu-clair);
  border: none;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  font-size: 1.1rem;
  cursor: pointer;
  color: var(--bleu);
  transition: background var(--transition);
}

.calendrier-nav button:hover {
  background: var(--bleu);
  color: var(--blanc);
}

/* Jours de la semaine */
.calendrier-jours-semaine {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  text-align: center;
  font-size: .78rem;
  font-weight: 600;
  color: var(--texte-doux);
  text-transform: uppercase;
  letter-spacing: .5px;
  margin-bottom: .5rem;
}

/* Grille des jours */
.calendrier-grille {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
}

.jour {
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-size: .95rem;
  font-weight: 500;
  cursor: default;
  position: relative;
  transition: background var(--transition), color var(--transition);
}

/* Jour vide (décalage de début de mois) */
.jour.vide { background: transparent; }

/* Jour passé ou sans atelier */
.jour.inactif {
  color: var(--gris);
  background: transparent;
}

/* Jour avec atelier(s) disponible(s) */
.jour.actif {
  background: var(--bleu-clair);
  color: var(--bleu);
  cursor: pointer;
  font-weight: 700;
}

.jour.actif:hover {
  background: var(--bleu);
  color: var(--blanc);
}

/* Jour sélectionné */
.jour.selectionne {
  background: var(--bleu);
  color: var(--blanc);
  box-shadow: 0 0 0 3px rgba(74,111,165,.35);
}

/* Aujourd'hui */
.jour.aujourdhui {
  outline: 2px solid var(--bleu);
  outline-offset: -2px;
}

/* Badge "point vert" sur les jours avec ateliers */
.jour.actif::after {
  content: '';
  position: absolute;
  bottom: 5px;
  left: 50%;
  transform: translateX(-50%);
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: var(--vert);
}

/* ============================================================
   ATELIERS DU JOUR
   ============================================================ */
.ateliers-section {
  background: var(--blanc);
  border-radius: var(--rayon);
  box-shadow: var(--ombre);
  padding: 1.5rem;
}

.ateliers-section h2 {
  font-size: 1.15rem;
  font-weight: 600;
  color: var(--bleu);
  margin-bottom: 1.2rem;
}

.ateliers-liste {
  display: flex;
  flex-direction: column;
  gap: .85rem;
  margin-bottom: 1.2rem;
}

/* Carte d'atelier */
.atelier-card {
  border: 1.5px solid var(--gris-bord);
  border-radius: var(--rayon);
  padding: 1rem 1.2rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  transition: border-color var(--transition), box-shadow var(--transition);
}

.atelier-card:not(.complet):hover {
  border-color: var(--bleu);
  box-shadow: 0 2px 10px rgba(74,111,165,.15);
}

.atelier-card.complet {
  background: var(--gris-clair);
  opacity: .7;
}

.atelier-info { flex: 1; }

.atelier-nom {
  font-weight: 700;
  font-size: 1.05rem;
  margin-bottom: .25rem;
}

.atelier-horaire {
  font-size: .9rem;
  color: var(--texte-doux);
}

.atelier-places {
  font-size: .85rem;
  font-weight: 600;
  padding: .2rem .6rem;
  border-radius: 20px;
  white-space: nowrap;
}

.atelier-places.dispo {
  background: var(--vert-clair);
  color: var(--vert);
}

.atelier-places.complet {
  background: #FFEBEE;
  color: var(--rouge);
}

.atelier-places.last {
  background: #FFF8E1;
  color: #E65100;
}

.btn-reserver {
  background: var(--bleu);
  color: var(--blanc);
  border: none;
  border-radius: 6px;
  padding: .5rem 1.1rem;
  font-size: .9rem;
  font-weight: 600;
  cursor: pointer;
  transition: background var(--transition);
  white-space: nowrap;
}

.btn-reserver:hover {
  background: #3a5a8a;
}

.btn-reserver:disabled {
  background: var(--gris);
  cursor: not-allowed;
}

/* ============================================================
   FORMULAIRE
   ============================================================ */
.formulaire-section {
  background: var(--blanc);
  border-radius: var(--rayon);
  box-shadow: var(--ombre);
  padding: 1.5rem;
}

.formulaire-section h2 {
  font-size: 1.15rem;
  font-weight: 600;
  color: var(--bleu);
  margin-bottom: 1.2rem;
}

/* Récap atelier choisi */
.recap-atelier {
  background: var(--bleu-clair);
  border-left: 4px solid var(--bleu);
  border-radius: 0 var(--rayon) var(--rayon) 0;
  padding: .8rem 1rem;
  margin-bottom: 1.4rem;
  font-size: .95rem;
}

.recap-atelier strong {
  display: block;
  font-size: 1rem;
  color: var(--bleu);
  margin-bottom: .2rem;
}

/* Champs */
.champ {
  margin-bottom: 1.1rem;
}

.champ label {
  display: block;
  font-size: .9rem;
  font-weight: 600;
  margin-bottom: .35rem;
  color: var(--texte);
}

.champ input {
  width: 100%;
  padding: .65rem .9rem;
  border: 1.5px solid var(--gris-bord);
  border-radius: 6px;
  font-size: 1rem;
  transition: border-color var(--transition);
  outline: none;
  color: var(--texte);
}

.champ input:focus {
  border-color: var(--bleu);
  box-shadow: 0 0 0 3px rgba(74,111,165,.15);
}

.champ input.invalide {
  border-color: var(--rouge);
}

.erreur-champ {
  display: block;
  color: var(--rouge);
  font-size: .82rem;
  margin-top: .25rem;
  min-height: 1.1em;
}

.obligatoire { color: var(--rouge); }

/* Boutons du formulaire */
.form-actions {
  display: flex;
  gap: .8rem;
  margin-top: 1.4rem;
  flex-wrap: wrap;
}

/* ============================================================
   BOUTONS GÉNÉRAUX
   ============================================================ */
.btn-principal {
  background: var(--bleu);
  color: var(--blanc);
  border: none;
  border-radius: 8px;
  padding: .7rem 1.4rem;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  transition: background var(--transition);
}

.btn-principal:hover { background: #3a5a8a; }
.btn-principal:disabled { background: var(--gris); cursor: not-allowed; }

.btn-secondaire {
  background: transparent;
  color: var(--bleu);
  border: 1.5px solid var(--bleu);
  border-radius: 8px;
  padding: .65rem 1.2rem;
  font-size: .95rem;
  font-weight: 600;
  cursor: pointer;
  transition: background var(--transition), color var(--transition);
}

.btn-secondaire:hover {
  background: var(--bleu-clair);
}

/* ============================================================
   CONFIRMATION FINALE
   ============================================================ */
.confirmation-section {
  display: flex;
  justify-content: center;
  align-items: center;
}

.confirmation-card {
  background: var(--blanc);
  border-radius: var(--rayon);
  box-shadow: var(--ombre);
  padding: 2.5rem 2rem;
  text-align: center;
  max-width: 480px;
  width: 100%;
}

.confirmation-icone {
  font-size: 3.5rem;
  margin-bottom: .8rem;
}

.confirmation-card h2 {
  font-size: 1.4rem;
  color: var(--vert);
  margin-bottom: .8rem;
}

.confirmation-card p {
  color: var(--texte-doux);
  line-height: 1.6;
  margin-bottom: 1.4rem;
}

/* ============================================================
   LOADER
   ============================================================ */
.loader {
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,.75);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  z-index: 100;
}

.loader p {
  color: var(--bleu);
  font-weight: 600;
}

.loader-spinner {
  width: 44px;
  height: 44px;
  border: 4px solid var(--bleu-clair);
  border-top-color: var(--bleu);
  border-radius: 50%;
  animation: spin .7s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }

/* ============================================================
   ERREUR GLOBALE
   ============================================================ */
.erreur-globale {
  position: fixed;
  bottom: 1.5rem;
  left: 50%;
  transform: translateX(-50%);
  background: #FFEBEE;
  border: 1.5px solid var(--rouge);
  border-radius: var(--rayon);
  padding: 1rem 1.4rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  box-shadow: var(--ombre);
  z-index: 200;
  max-width: 90vw;
}

.erreur-globale p { color: var(--rouge); font-weight: 600; }

/* ============================================================
   FOOTER
   ============================================================ */
footer {
  text-align: center;
  padding: 1.2rem;
  font-size: .85rem;
  color: var(--texte-doux);
  border-top: 1px solid var(--gris-bord);
}

/* ============================================================
   UTILITAIRES
   ============================================================ */
.hidden { display: none !important; }

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 480px) {
  header h1 { font-size: 1.4rem; }
  .calendrier-section,
  .ateliers-section,
  .formulaire-section { padding: 1rem; }
  .jour { font-size: .8rem; }
  .form-actions { flex-direction: column; }
  .btn-principal, .btn-secondaire { width: 100%; text-align: center; }
}
